{% extends "base.html" %}

{% block titolo %}About Us{% endblock %}

{% block contenuto %}


<!-- Sezione Biglietto Acquistato -->
{% if biglietto %}
<div class="container mt-4">
  <h2 class="mb-4">ðŸŽ« Il Tuo Biglietto</h2>
  
  <div class="card border-success shadow-lg">
    <div class="card-header bg-success text-white">
      <h5 class="mb-0">
        <i class="bi bi-ticket-perforated"></i> 
        Biglietto {{ biglietto[0] }} - Torino Soundwave 2025
      </h5>
    </div>
    
    <div class="card-body">
      <div class="row">
        
        <!-- Colonna sinistra: Dettagli biglietto -->
        <div class="col-md-8">
          <div class="row mb-3">
            <div class="col-sm-4"><strong>Tipo Biglietto:</strong></div>
            <div class="col-sm-8">
              <span class="badge bg-primary fs-6">{{ biglietto[0] }}</span>
            </div>
          </div>
          
          <div class="row mb-3">
            <div class="col-sm-4"><strong>Prezzo:</strong></div>
            <div class="col-sm-8">
              <span class="text-success fs-5 fw-bold">â‚¬{{ biglietto[4] }}</span>
            </div>
          </div>
          
          <div class="row mb-3">
            <div class="col-sm-4"><strong>Data Acquisto:</strong></div>
            <div class="col-sm-8">{{ data }}</div>
            <div class="col-sm-4"><strong>Ora Acquisto:</strong></div>
            <div class="col-sm-8">{{ orario }}</div>
          </div>
          
          <div class="row mb-3">
            <div class="col-sm-4"><strong>Valido per:</strong></div>
            <div class="col-sm-8">
              {% if biglietto[0] == 'Giornaliero' and biglietto[1] %}
                <span class="badge bg-info">{{ biglietto[1] }}</span>
              {% elif biglietto[0] == 'Due giorni' and biglietto[2] and biglietto[3] %}
                <span class="badge bg-info me-1">{{ biglietto[2] }}</span>
                <span class="badge bg-info">{{ biglietto[3] }}</span>
              {% elif biglietto[0] == 'Full pass' %}
                <span class="badge bg-warning text-dark me-1">VenerdÃ¬ 20 Giugno</span>
                <span class="badge bg-warning text-dark me-1">Sabato 21 Giugno</span>
                <span class="badge bg-warning text-dark">Domenica 22 Giugno</span>
              {% endif %}
            </div>
          </div>
          
          <!-- Informazioni importanti -->
          <div class="alert alert-info mt-4">
            <h6><i class="bi bi-info-circle"></i> Informazioni Importanti</h6>
            <ul class="mb-0 small">
              <li>Presenta questo QR code all'ingresso del festival</li>
              <li>Ãˆ necessario un documento di identitÃ  valido</li>
              <li>Il biglietto Ã¨ nominale e non trasferibile</li>
              <li>Conserva questo biglietto per tutta la durata dell'evento</li>
            </ul>
          </div>
        </div>
        
        <!-- Colonna destra: QR Code -->
        <div class="col-md-4 text-center">
          <div class="border rounded p-3 bg-light">
            <h6 class="mb-3">QR Code Ingresso</h6>
            
            <!-- QR Code statico -->
            <img src="{{ url_for('static', filename='qr_code_ticket.png') }}" 
                 alt="QR Code Biglietto" 
                 class="img-fluid mb-3" 
                 style="width: 150px; height: 150px;">
            
            <!-- ID univoco del biglietto -->
            <div class="small text-muted">
              <strong>ID Biglietto:</strong><br>
              <code>{{ session.user_id }}-{{ biglietto[0][:3]|upper }}-{{ data[:4] }}</code>
            </div>
          </div>
        </div>
        
      </div>
    </div>
    
    <!-- Footer con stato biglietto -->
    <div class="card-footer bg-light">
      <div class="row align-items-center">
        <div class="col">
          <small class="text-muted">
            <i class="bi bi-check-circle-fill text-success"></i>
            Biglietto valido e confermato
          </small>
        </div>
        <div class="col-auto">
          <button class="btn btn-outline-secondary btn-sm" onclick="window.print()">
            <i class="bi bi-printer"></i> Stampa Biglietto
          </button>
        </div>

{% else %}
<!-- Messaggio quando non ha biglietti -->
<div class="container mt-4">
  <div class="alert alert-info text-center">
    <h5><i class="bi bi-ticket"></i> Nessun Biglietto Acquistato</h5>
    <p class="mb-3">Non hai ancora acquistato un biglietto per il Torino Soundwave 2025.</p>
    <a href="{{ url_for('biglietti') }}" class="btn btn-primary">
      <i class="bi bi-cart-plus"></i> Acquista Biglietto
    </a>
  </div>
</div>
{% endif %}


{% endblock %}